:root{
  --win-bg: #06010f;
  --win-title: #ccbef7;
  --win-face: #e6e2f5;
  --win-shadow: #2b1f40;
  --text: #0f0c1c;
  --vh: 100vh;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  min-height:calc(var(--vh, 100vh));
  font-family:'MS PGothic','Noto Sans JP',system-ui,-apple-system,'Segoe UI',Roboto,Arial;
  background:var(--win-bg);
  color:var(--text);
  position:relative;
  overflow:hidden;
}

.media-bg{
  display:none;
}
.media-bg::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(ellipse at 20% 30%,rgba(139,0,0,0.15),transparent 50%),
    radial-gradient(ellipse at 80% 70%,rgba(75,0,130,0.12),transparent 50%),
    radial-gradient(ellipse at 50% 50%,rgba(218,165,32,0.08),transparent 70%),
    linear-gradient(135deg,#0a0806 0%,#140f0d 30%,#1a0a1f 60%,#0f0b09 100%);
  z-index:1;
  pointer-events:none;
}
.media-bg::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(139,0,0,0.015) 3px,rgba(139,0,0,0.015) 4px),
    repeating-linear-gradient(90deg,transparent,transparent 3px,rgba(218,165,32,0.01) 3px,rgba(218,165,32,0.01) 4px);
  z-index:2;
  pointer-events:none;
  opacity:0.6;
}
.bg-media{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:left center;
  filter:saturate(1.05) contrast(1.05);
  display:block;
}
.bg-fallback{display:none}
body.no-video #bg-video{display:none}
body.no-video .bg-fallback{
  display:block;
  z-index:1;
}
.age-gate{
  position:relative;
  z-index:20;
  width:100%;
  min-height:calc(var(--vh, 100vh));
  padding:clamp(24px,4vw,48px);
  display:flex;
  justify-content:center;
  align-items:center;
}
.age-gate--hidden{
  display:none;
}

/* ダイアログ風オーバーレイ - 後で再定義 */
.lead{font-size:1.05rem}
.note{font-size:0.95rem;color:#4c345f}
.overlay h1{
  font-size:clamp(22px,3.6vw,32px);
  margin:0;
  color:#19002f;
  letter-spacing:0.04em;
}
.overlay p{
  margin:0;
  line-height:1.7;
  color:#21162f;
}
.eyebrow{
  margin:0;
  font-size:13px;
  text-transform:uppercase;
  letter-spacing:0.4em;
  color:var(--win-shadow);
}
.notices{
  margin:0;
  padding-left:1.25rem;
  text-align:left;
  color:#2d1b42;
  line-height:1.6;
}
.notices li{
  margin-bottom:0.35em;
}
.privacy-note{
  font-size:0.85rem;
  color:#4b3c62;
  margin:0;
}
.noscript-message{
  position:relative;
  z-index:30;
  margin:0;
  padding:8px 16px;
  color:#fff;
  font-size:0.9rem;
}

.controls{
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
}
.btn{
  padding:10px 18px;
  border:2px solid var(--win-shadow);
  background:linear-gradient(var(--win-face),#d7d0f1);
  color:var(--text);
  font-size:15px;
  cursor:pointer;
  box-shadow:inset 2px 2px 0 #fff, inset -2px -2px 0 rgba(32,0,47,0.25);
  transition:transform .2s ease, box-shadow .2s ease;
}
.btn.primary{
  background:linear-gradient(#fff,#dfe3ff);
  border-color:#4b3286;
  color:#140529;
}
.btn:focus-visible{
  outline:3px solid rgba(139,0,255,0.25);
  outline-offset:2px;
}
.btn:hover{
  transform:translateY(-1px);
  box-shadow:inset 2px 2px 0 #fff, inset -2px -2px 0 rgba(32,0,47,0.35), 0 6px 16px rgba(10,0,22,0.2);
}

@media (max-width:767px){
  .overlay{
    gap:12px;
  }
  .controls{
    flex-direction:column;
  }
  .btn{
    width:100%;
  }
}

.fade-out{animation:fadeOut .5s forwards}
@keyframes fadeOut{to{opacity:0;transform:translateY(8px)}}

/* スライドショー（ビデオ終了後に表示） */
.slideshow{
  display:none;
  position:absolute;
  inset:0;
  align-items:center;
  justify-content:center;
  z-index:10;
  background:#000;
}
.slideshow img{
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:left center;
  display:block;
}
.slideshow-flash{
  position:absolute;
  inset:0;
  background:#fff;
  opacity:0;
  pointer-events:none;
  transition:opacity .12s linear;
}
.slideshow-flash.visible{opacity:1}

/* 火の粉アニメーション */
.embers{
  position:absolute;
  inset:0;
  z-index:3;
  pointer-events:none;
  overflow:hidden;
}
.ember{
  position:absolute;
  width:var(--ember-width);
  height:var(--ember-height);
  border-radius:50% / 70%;
  background:radial-gradient(ellipse at 30% 30%,
    rgba(255,255,255,0.95) 0%,
    rgba(255,240,180,0.9) 15%,
    rgba(255,180,80,0.85) 35%,
    rgba(255,120,40,0.75) 60%,
    rgba(200,40,0,0.6) 85%,
    rgba(120,0,0,0.4) 100%
  );
  box-shadow:
    0 0 3px rgba(255,255,255,0.9),
    0 0 8px rgba(255,180,80,0.95),
    0 0 16px rgba(255,120,40,0.85),
    0 0 28px rgba(200,40,0,0.6);
  animation:emberRise var(--duration) linear infinite;
  animation-delay:var(--delay);
  opacity:0;
  filter:blur(0.8px);
}
@keyframes emberRise{
  0%{
    transform:translateY(0) translateX(0) scale(0);
    opacity:0;
  }
  10%{
    opacity:1;
    transform:translateY(-10vh) translateX(calc(var(--drift) * 5px)) scale(1);
  }
  50%{
    opacity:0.8;
    transform:translateY(-50vh) translateX(calc(var(--drift) * 25px)) scale(1.2);
  }
  90%{
    opacity:0.3;
    transform:translateY(-90vh) translateX(calc(var(--drift) * 40px)) scale(0.8);
  }
  100%{
    opacity:0;
    transform:translateY(-100vh) translateX(calc(var(--drift) * 50px)) scale(0);
  }
}

/* ダイアログの装飾強化 */
.overlay{
  position:relative;
  display:flex;
  flex-direction:column;
  gap:clamp(12px,2vw,18px);
  color:var(--text);
  text-align:center;
  padding:clamp(20px,4vw,36px);
  width:min(760px,92vw);
  background:
    radial-gradient(circle at 30% 20%,rgba(218,165,32,0.05),transparent 60%),
    linear-gradient(135deg,rgba(250,248,255,0.98),rgba(244,241,255,0.95));
  border:3px solid;
  border-image:linear-gradient(135deg,rgba(218,165,32,0.6),rgba(139,0,0,0.4) 30%,rgba(75,0,130,0.5) 70%,rgba(218,165,32,0.6)) 1;
  box-shadow:
    0 0 60px rgba(218,165,32,0.3),
    0 20px 80px rgba(4,0,12,0.6),
    inset 0 0 80px rgba(218,165,32,0.03);
  clip-path:polygon(
    16px 0,100% 0,100% calc(100% - 16px),calc(100% - 16px) 100%,0 100%,0 16px
  );
  animation:overlayEntrance 1.2s cubic-bezier(0.25,0.46,0.45,0.94) forwards;
  opacity:0;
  transform:perspective(1200px) rotateX(-15deg) scale(0.95);
}
@keyframes overlayEntrance{
  0%{
    opacity:0;
    transform:perspective(1200px) rotateX(-15deg) translateY(40px) scale(0.95);
  }
  100%{
    opacity:1;
    transform:perspective(1200px) rotateX(0) translateY(0) scale(1);
  }
}

@media (prefers-reduced-motion: reduce){
  .btn{transition:none}
  .fade-out{animation:none}
  .slideshow-flash{transition:none}
  .ember{animation:none;display:none}
  .overlay{animation:none;opacity:1;transform:none}
}
